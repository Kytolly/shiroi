<!DOCTYPE html>
<html>
<%- partial('_partial/head') %>

<body>
  <%- partial('_partial/header') %>
  <main class="main">
    <%- body %>
  </main>
  <%- partial('_partial/footer') %>

  <script>
    // Initialize a global config object for theme features
    window.THEME_CONFIG = {};
  </script>

  <!-- Image Feature Config -->
  <% if (theme.image && theme.image.enable) { %>
    <script>
      window.THEME_CONFIG.image = {
        center: <%- theme.image.center || false %>,
        caption: <%- theme.image.caption || false %>
      };
    </script>
  <% } %>

  <!-- Code Block Feature Config -->
  <% if (theme.code_block) { %>
    <script>
      window.THEME_CONFIG.code_block = {
        copy_button: "<%- theme.code_block.copy_button || '' %>",
        theme_toggle: <%- JSON.stringify(theme.code_block.theme_toggle || {}) %>
      };
    </script>
  <% } %>

  <!-- Feature Scripts -->
  <% if (theme.image && theme.image.enable) { %>
    <%- js('js/image-handler.js') %>
  <% } %>
  <%- js('js/highlight.js') %>
  <% if (theme.code_block && theme.code_block.theme_toggle && theme.code_block.theme_toggle.enable) { %>
    <%- js('js/codeblock-theme-toggle.js') %>
  <% } %>
  <%- js('js/theme.js') %>
</body>

</html>